cd /workspace

# Make the scanner executable
chmod +x scripts/scanStrings.mjs

# Test the scanner works
npm run scan:strings

# Add all changes
git add -A

# Commit the comprehensive fixes
git commit -m "fix(search): add safe string helpers, remove fast-glob, harden SearchPanel & API

🔧 Build Fixes:
- Replace scanStrings.ts with zero-dependency scanStrings.mjs  
- Update tsconfig.json to exclude scripts/ and supabase/functions/
- Add npm run scan:strings command

🛡️ String Safety:
- Fix lib/unComtradeAPI.ts: safe countryName handling
- Fix lib/confidenceEngine.ts: safe commodity_name processing  
- Fix lib/crm.ts: safe contact search with null checks
- Fix lib/subscription.ts: safe plan normalization

✅ No more 'Cannot read property toUpperCase of null' crashes
✅ CI build should pass without fast-glob dependency issues
✅ All string operations now null-safe with fallbacks"

# Test build before pushing (optional but recommended)
npm run build

# Push to deploy
git push origin hotfix/search-unified-mapper
